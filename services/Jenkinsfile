// Declarative //
pipeline {
    agent {
        docker {
            image 'maven:3-alpine'
            // label 'my-defined-label'
            // args  '-v /tmp:/tmp'
        }
    }
    environment { 
        AN_ACCESS_KEY = credentials('my-prefined-secret-text') 
    }

    stages {
        
        stage('Example Build') {
            agent { 
                docker 'python:latest'
                label 'my-defined-label'
                args  '-p 8001:8001' 
            } 
            steps {
                echo ls 
            }
        }
        stage('Clone repository') { 
            agent any
            steps { 
                script{
                    checkout scm
                }
                ls
            }
        }
        stage('Example Test') {
            agent { dockerfile { dir 'docker/Dockerfile.python' } }
            steps {
                echo 'Hello, JDK'
                sh 'java -version'
            }
        }
    }
}

